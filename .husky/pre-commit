

echo "üîç pre-commit: quick checks..."

set -e

# API tests (optional)
if [ -f "apps/api/package.json" ]; then
  echo "‚û°Ô∏è  Building API: running tests if available..."
  cd apps/api
  npm ci --silent
  npm run -s test || echo "‚ÑπÔ∏è  API: no tests or tests skipped."
  npm run -s build
  cd ../..
fi

# Web tests (optional)
if [ -f "apps/web/package.json" ]; then
  echo "‚û°Ô∏è  Building Web: running tests if available..."
  cd apps/web
  npm ci --silent
  npm run -s test || echo "‚ÑπÔ∏è  Web: no tests or tests skipped."
  npm run -s build
  cd ../..
fi

echo "‚úÖ pre-commit checks done."
